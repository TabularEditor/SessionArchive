{
  "name": "Orders Target MTD",
  "expression": [
    "",
    "-- Calculates the target for the current month/year selection",
    "VAR _CurrentMonth =",
    "    CALCULATE (",
    "        [Orders Target],",
    "        ALL ( 'Date' ),",
    "        VALUES (",
    "            'Date'[Calendar Month Year (ie Jan 21)]",
    "        )",
    "    )",
    "",
    "-- Computes rate at which Budget increases through the month",
    "VAR _CurrentMonthWDMTD =",
    "    POWER (",
    "        CALCULATE (",
    "            MAX ( 'Date'[Workdays MTD %] ),",
    "            'Date'[IsDateInScope] = TRUE",
    "        ),",
    "        0.93",
    "    )",
    "VAR _CurrentMonthWDTotal =",
    "    POWER (",
    "        CALCULATE (",
    "            MAX ( 'Date'[Workdays MTD %] )",
    "        ),",
    "        0.93",
    "    )",
    "VAR _Period =",
    "    SELECTEDVALUE (",
    "        '4) Selected Period'[Period]",
    "    )",
    "    ",
    "VAR __HasOneMonth =",
    "    HASONEVALUE (",
    "        'Date'[Calendar Month Year (ie Jan 21)]",
    "    )",
    "RETURN",
    "    -- return MTD value if a month is selected",
    "    IF.EAGER (",
    "        __HasOneMonth && _Period = \"Full Period\",",
    "        _CurrentMonthWDTotal",
    "            * _CurrentMonth,",
    "        IF (",
    "            __HasOneMonth,",
    "            _CurrentMonthWDMTD",
    "                * _CurrentMonth",
    "        )",
    "    )"
  ],
  "formatString": "#,##0",
  "displayFolder": "2. MTD\\Orders Target",
  "lineageTag": "1d671a50-fac4-4d2b-a41d-3328c522dafa"
}