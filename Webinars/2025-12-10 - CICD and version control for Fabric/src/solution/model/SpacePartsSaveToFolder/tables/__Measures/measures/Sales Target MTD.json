{
  "name": "Sales Target MTD",
  "expression": [
    "",
    "-- Calculates the target for the current month/year selection",
    "VAR _CurrentMonth =",
    "    CALCULATE (",
    "        [Sales Target],",
    "        ALL ( 'Date' ),",
    "        VALUES (",
    "            'Date'[Calendar Month Year (ie Jan 21)]",
    "        )",
    "    )",
    "",
    "-- Computes rate at which Budget increases through the month",
    "VAR _CurrentMonthWDMTD =",
    "    POWER (",
    "        CALCULATE (",
    "            MAX ( 'Date'[Workdays MTD %] ),",
    "            'Date'[IsDateInScope] = TRUE",
    "        ),",
    "        1.035",
    "    )",
    "VAR CurrentMonthWDTotal =",
    "    POWER (",
    "        CALCULATE (",
    "            MAX ( 'Date'[Workdays MTD %] )",
    "        ),",
    "        1.035",
    "    )",
    "VAR _Period =",
    "    SELECTEDVALUE (",
    "        '4) Selected Period'[Period]",
    "    )",
    "VAR _HasOneMonth =",
    "    HASONEVALUE (",
    "        'Date'[Calendar Month Year (ie Jan 21)]",
    "    )",
    "RETURN",
    "    -- return MTD value if a month is selected",
    "    IF.EAGER (",
    "        _HasOneMonth && _Period = \"Full Period\",",
    "        CurrentMonthWDTotal",
    "            * _CurrentMonth,",
    "        IF (",
    "            _HasOneMonth,",
    "            _CurrentMonthWDMTD",
    "                * _CurrentMonth",
    "        )",
    "    )"
  ],
  "formatString": "#,##0",
  "displayFolder": "2. MTD\\Sales Target",
  "lineageTag": "528d4072-5ea6-4427-97e0-7e812a0f511a"
}