{
  "name": "Forecast",
  "expression": [
    "",
    "IF.EAGER(",
    "    HASONEVALUE( '2) Selected Unit'[Select a Unit] )",
    "        && ",
    "    HASONEVALUE( 'Exchange Rate'[From Currency] ),",
    "",
    "    VAR _SELECTED_CURRENCY = ",
    "        SELECTEDVALUE( 'Exchange Rate'[From Currency] )",
    "",
    "    VAR _SELECTED_RATE_TYPE = ",
    "        SELECTEDVALUE( '2) Selected Unit'[Select a Unit] )",
    "    ",
    "    VAR _SELECTED_BUDGET_RATE =",
    "        MAX( 'Exchange Rate'[Rate] )",
    "        ",
    "    VAR _SELECTED_MONTHLY_RATE =",
    "        ADDCOLUMNS(",
    "            SUMMARIZE(",
    "                'Exchange Rate',",
    "                'Date'[Calendar Month Year (ie Jan 21)]",
    "            ),",
    "            \"Curr\", ",
    "            CALCULATE ( ",
    "                MAX( 'Exchange Rate'[Rate] ) ",
    "            )",
    "        )",
    "        ",
    "    RETURN",
    "",
    "    IF(",
    "        _SELECTED_RATE_TYPE = \"Value (Budget Rate)\",",
    "        SUM ( 'Forecast'[Forecast (EUR)]) ",
    "        * ",
    "        _SELECTED_BUDGET_RATE,",
    "        ",
    "        IF(",
    "            _SELECTED_RATE_TYPE = \"Value (Monthly Rate)\",",
    "            SUMX(",
    "                _SELECTED_MONTHLY_RATE,",
    "                CALCULATE( ",
    "                    SUM ( 'Forecast'[Forecast (EUR)])",
    "                )",
    "                * [Curr]",
    "            )",
    "        )",
    "    )",
    ")"
  ],
  "formatString": "#,##0",
  "displayFolder": "Measures\\i. Total",
  "lineageTag": "a6383680-00ad-44a2-a972-afd4378179ad"
}